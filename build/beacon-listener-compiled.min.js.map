{"version":3,"file":"/home/kris/workspace/beacon-listener/build/beacon-listener-compiled.min.js","sources":["beacon-listener-compiled.js"],"names":["TOP","RIGHT","BOTTOM","LEFT","EVENT_TYPE_BEACON_FOUND","EVENT_TYPE_BEACON_LOST","BeaconListener","babelHelpers","createClass","key","get","me","_events","getConfig","set","beacons","_config","_handleBeaconsChange","config","classCallCheck","this","staticClass","region","autoStart","pollInterval","_MIN_TIMER_VAL","_isListening","_timerHandle","_pollInterval","_region","_beaconList","_beaconStates","_beaconDOMNodes","_fullyInside","listeners","_handleRegionChange","_handleFullyInsideChange","start","later","check","window","addEventListener","value","stop","cancel","isUndefined","_timerHandler","inViewportRegion","node","fullyInside","altRegion","inRegion","viewportRegion","node2","r","getNodeRegion","n","off","tagName","isObject","getOffsets","testMethod","forEach","call","index","testNode","args","apply","fireEvent","listener","beacon","type","data","dispatcher","document","event","CustomEvent","detail","target","dispatchEvent","callback","push","removeEventListener","stack","i","l","length","splice","configItem","hasOwnProperty","isListening","requestAnimationFrame","recalcRegion","_getList","fill","newRegion","isNumber","querySelector","r1","r2","result","Math","max","min","when","obj","fn","periodic","emptyArray","Array","isArray","from","cancelled","method","isString","wrapper","id","setInterval","setTimeout","interval","clearInterval","clearTimeout","varType","typeof","isFunction","o","isFinite","getNodeXY","win","winXY","nodeXY","nodeRect","pageXOffset","pageYOffset","getBoundingClientRect","left","top","val","querySelectorAll","body","parentNode","scrollX","scrollY","offsetLeft","offsetTop","_getRegion","winWidth","winHeight","right","bottom","width","height","rect","_getWinSize","doc","defaultView","parentWindow","mode","compatMode","h","innerHeight","w","innerWidth","root","documentElement","clientHeight","clientWidth","docHeight","_getDocSize","docWidth","scrollHeight","scrollWidth","docScrollX","t","scrollLeft","docScrollY","scrollTop"],"mappings":"AAAA,YAEA,IAAIA,KAAM,KACV,IAAIC,OAAQ,OACZ,IAAIC,QAAS,QACb,IAAIC,MAAO,MACX,IAAIC,yBAA0B,uBAC9B,IAAIC,wBAAyB,sBAK7B,IAAIC,gBAAiB,WACpBC,aAAaC,YAAYF,IACxBG,IAAK,SACLC,IAAK,QAASA,KACb,MAAOC,IAAGC,WAGXH,IAAK,UACLC,IAAK,QAASA,KACb,MAAOC,IAAGE,UAAU,YAErBC,IAAK,QAASA,GAAIC,GACjBJ,GAAGK,QAAQD,QAAUA,CACrBJ,IAAGM,0BAIL,SAASX,GAAeY,GACvBX,aAAaY,eAAeC,KAAMd,EAGlC,IAAIK,GAAKS,KACLC,EAAcf,EACdS,EACAO,CAEJJ,GAASA,IACRH,QAAS,UACTO,OAAQ,KACRC,UAAW,MACXC,aAAc,IAEfb,GAAGK,QAAUE,CACbP,GAAGc,eAAiB,CAEpBd,GAAGe,aAAe,KAClBf,GAAGgB,aAAe,IAClBhB,GAAGiB,cAAgBV,EAAOM,YAC1Bb,GAAGkB,QAAU,IACblB,GAAGmB,YAAc,IACjBnB,GAAGoB,gBACHpB,GAAGqB,kBACHrB,GAAGsB,aAAe,KAClBtB,GAAGuB,YAEHnB,GAAUG,EAAOH,OACjBO,GAASJ,EAAOI,MAGhB,IAAIP,EAAS,CACZJ,EAAGM,uBAIJ,GAAIK,EAAQ,CACXX,EAAGwB,sBAGJxB,EAAGyB,0BAEH,IAAIzB,EAAGE,UAAU,aAAc,CAC9BF,EAAG0B,OAGHhB,GAAYiB,MAAM3B,EAAGE,UAAU,gBAAiBF,EAAIA,EAAG4B,MAAO,KAAM,OAGrEC,OAAOC,iBAAiB,SAAU,WACjC,MAAO9B,GAAG4B,OAEXC,QAAOC,iBAAiB,SAAU,WACjC,MAAO9B,GAAG4B,OAEXC,QAAOC,iBAAiB,SAAU,WACjC,MAAO9B,GAAGwB,qBAEXK,QAAOC,iBAAiB,SAAU,WACjC,MAAO9B,GAAGwB,sBAWZ5B,aAAaC,YAAYF,IACxBG,IAAK,OACLiC,MAAO,QAASC,KACf,GAAIhC,GAAKS,IACT,IAAIT,EAAGe,eAAiB,MAAQf,EAAGgB,eAAiB,KAAM,CACzDhB,EAAGgB,aAAaiB,QAChBjC,GAAGgB,aAAe,IAClBhB,GAAGe,aAAe,UAWpBjB,IAAK,QACLiC,MAAO,QAASL,KACf,GAAI1B,GAAKS,KACLC,EAAcf,CAClB,IAAIe,EAAYwB,YAAYlC,EAAGmC,iBAAmBzB,EAAYwB,YAAYlC,EAAGmB,cAAgBnB,EAAGmB,cAAgB,KAAM,CACrHnB,EAAGe,aAAe,IAElBf,GAAGgB,aAAeN,EAAYiB,MAAM3B,EAAGE,UAAU,gBAAiBF,EAAIA,EAAG4B,MAAO,KAAM,UAaxF9B,IAAK,mBACLiC,MAAO,QAASK,GAAiBC,EAAMC,EAAaC,GACnD,MAAO9B,MAAK+B,SAASH,EAAM1C,EAAe8C,iBAAkBH,EAAaC,MAa1EzC,IAAK,WACLiC,MAAO,QAASS,GAASH,EAAMK,EAAOJ,EAAaC,GAClD,GAAI5B,MACAD,EAAcf,EACdgD,EAAIJ,GAAa7B,EAAYkC,cAAcP,GAC3CQ,EAAIH,EACJI,CAEJ,IAAID,EAAEE,QAAS,CACdpC,EAASD,EAAYkC,cAAcC,OAC7B,IAAInC,EAAYsC,SAASN,GAAQ,CACvC/B,EAAS+B,MACH,CACN,MAAO,OAGR,GAAIJ,EAAa,CAChB,MAAOK,GAAEnD,OAASmB,EAAOnB,OAASmD,EAAErD,QAAUqB,EAAOrB,QAAUqD,EAAEtD,MAAQsB,EAAOtB,MAAQsD,EAAEpD,SAAWoB,EAAOpB,YACtG,CACNuD,EAAMpC,EAAYuC,WAAWtC,EAAQgC,EACrC,OAAOG,GAAIvD,SAAWuD,EAAIzD,MAAQyD,EAAIxD,QAAUwD,EAAItD,UAItDM,IAAK,QAQLiC,MAAO,QAASH,KACf,GAAI5B,GAAKS,KACLE,EAASX,EAAGkB,QACZgC,CAEJ,IAAIvC,IAAW,KAAM,CACpBuC,EAAalD,EAAGoC,qBACV,CACNpC,EAAGwB,qBACHb,GAASX,EAAGkB,OACZgC,GAAalD,EAAGwC,YAGdW,QAAQC,KAAKpD,EAAGmB,YAAa,SAAUkB,EAAMgB,GAC/C,GAAIC,GAAWtD,EAAGqB,gBAAgBgC,GAC9Bb,EACAe,CAEJ,IAAI5C,IAAW,KAAM,CACpB4C,GAAQD,EAAUtD,EAAGsB,kBACf,CACNiC,GAAQD,EAAU3C,EAAQX,EAAGsB,cAG9BkB,EAAWU,EAAWM,MAAMxD,EAAIuD,EAEhC,IAAIf,GAAYxC,EAAGoB,cAAciC,KAAW,KAAM,CAEjDrD,EAAGoB,cAAciC,GAAS,IAE1BrD,GAAGyD,UAAUhE,yBAA2BiE,SAAU1D,EAAI2D,OAAQtB,GAAQrC,OAChE,KAAKwC,GAAYxC,EAAGoB,cAAciC,KAAW,KAAM,CAEzDrD,EAAGoB,cAAciC,GAAS,KAE1BrD,GAAGyD,UAAU/D,wBAA0BgE,SAAU1D,EAAI2D,OAAQtB,GAAQrC,SAaxEF,IAAK,YACLiC,MAAO,QAAS0B,GAAUG,EAAMC,EAAMC,GACrCA,EAAaA,GAAcC,QAC3B,IAAIC,GAAQ,GAAIC,aAAYL,GAAQM,OAAQL,EAAMM,OAAQ1D,MAC1DqD,GAAWM,cAAcJ,MAG1BlE,IAAK,mBACLiC,MAAO,QAASD,GAAiB8B,EAAMS,GACtC,KAAMT,IAAQnD,MAAKc,WAAY,CAC9Bd,KAAKc,UAAUqC,MAEhBnD,KAAKc,UAAUqC,GAAMU,KAAKD,MAG3BvE,IAAK,sBACLiC,MAAO,QAASwC,GAAoBX,EAAMS,GACzC,KAAMT,IAAQnD,MAAKc,WAAY,CAC9B,OAED,GAAIiD,GAAQ/D,KAAKc,UAAUqC,EAC3B,KAAK,GAAIa,GAAI,EAAGC,EAAIF,EAAMG,OAAQF,EAAIC,EAAGD,IAAK,CAC7C,GAAID,EAAMC,KAAOJ,EAAU,CAC1BG,EAAMI,OAAOH,EAAG,EAChB,OAAOhE,MAAK8D,oBAAoBX,EAAMS,QAKzCvE,IAAK,gBACLiC,MAAO,QAASqC,GAAcJ,GAC7B,KAAMA,EAAMJ,OAAQnD,MAAKc,WAAY,CACpC,OAED,GAAIiD,GAAQ/D,KAAKc,UAAUyC,EAAMJ,KAEjC,KAAK,GAAIa,GAAI,EAAGC,EAAIF,EAAMG,OAAQF,EAAIC,EAAGD,IAAK,CAC7CD,EAAMC,GAAGrB,KAAK3C,KAAMuD,GAErBD,SAASK,cAAcJ,MAexBlE,IAAK,YASLiC,MAAO,QAAS7B,GAAU2E,GACzB,GAAIpE,KAAKJ,QAAQyE,eAAeD,GAAa,CAC5C,MAAOpE,MAAKJ,QAAQwE,GAErB,MAAO,SAUR/E,IAAK,cACLiC,MAAO,QAASgD,KACf,MAAOtE,MAAKM,gBASbjB,IAAK,2BACLiC,MAAO,QAASN,KACf,GAAIzB,GAAKS,IAETT,GAAGsB,aAAetB,EAAGE,UAAU,kBAShCJ,IAAK,sBACLiC,MAAO,QAASP,KACf,GAAIxB,GAAKS,KACLE,EAASX,EAAGE,UAAU,SAE1B2B,QAAOmD,sBAAsB,WAC5BhF,EAAGiF,aAAatE,QAUlBb,IAAK,uBACLiC,MAAO,QAASzB,KACf,GAAIN,GAAKS,KACLC,EAAcf,EACdS,EAAUJ,EAAGE,UAAU,UAE3BF,GAAGqB,kBACHrB,GAAGmB,YAAcT,EAAYwE,SAAS9E,EACtCJ,GAAGoB,iBAAmB+D,KAAK,MAAOnF,EAAGmB,YAAYwD,OAEjD,IAAI3E,EAAGmB,aAAenB,EAAGmB,YAAYwD,OAAS,EAAG,IAC7CxB,QAAQC,KAAKpD,EAAGmB,YAAa,SAAUkB,EAAMgB,GAC/CrD,EAAGoB,cAAciC,GAAS,KAC1BrD,GAAGqB,gBAAgBgC,GAAShB,QAa/BvC,IAAK,eAWLiC,MAAO,QAASkD,GAAatE,GAC5B,GAAIX,GAAKS,KACL2E,EACA1E,EAAcf,CAElB,IAAIe,EAAYwB,YAAYvB,GAAS,CACpCA,EAASX,EAAGkB,QAGb,GAAIR,EAAYsC,SAASrC,IAAWD,EAAY2E,SAAS1E,EAAOtB,OAASqB,EAAY2E,SAAS1E,EAAOrB,SAAWoB,EAAY2E,SAAS1E,EAAOpB,UAAYmB,EAAY2E,SAAS1E,EAAOnB,OAAQ,CAC3LQ,EAAGkB,QAAUP,CACb,YACM,CACNA,EAASoD,SAASuB,cAAc3E,EAEhC,IAAIA,EAAQ,CACXyE,EAAY1E,EAAYkC,cAAcjC,EAEtC,IAAIyE,EAAW,CACdpF,EAAGkB,QAAUkE,CACb,UAMHpF,EAAGkB,QAAU,UAUdpB,IAAK,aACLiC,MAAO,QAASkB,GAAWsC,EAAIC,GAC9B,GAAIC,KAEJA,GAAOpG,KAAOqG,KAAKC,IAAIJ,EAAGlG,KAAMmG,EAAGnG,KACnCoG,GAAOnG,OAASoG,KAAKE,IAAIL,EAAGjG,OAAQkG,EAAGlG,OACvCmG,GAAOlG,QAAUmG,KAAKE,IAAIL,EAAGhG,QAASiG,EAAGjG,QACzCkG,GAAOjG,MAAQkG,KAAKC,IAAIJ,EAAG/F,MAAOgG,EAAGhG,MACrC,OAAOiG,MAGR3F,IAAK,QACLiC,MAAO,QAASJ,GAAMkE,EAAMC,EAAKC,EAAIlC,EAAMmC,GAC1C,GAAIC,MACAvF,EAAcf,CAElBkG,GAAOA,GAAQ,CAEf,KAAKnF,EAAYwB,YAAY2B,IAASA,EAAM,CAC3CA,GAAQnD,EAAYwB,YAAY2B,GAAQqC,MAAMC,QAAQtC,GAAQA,EAAOA,EAAKiB,eAAe,SAAWoB,MAAME,KAAKvC,GAAQoC,EAAaA,MAC9H,CACNpC,EAAOoC,EAGRH,EAAMA,GAAOjE,MAEb,IAAIwE,GAAY,MACZC,EAASR,GAAOpF,EAAY6F,SAASR,GAAMD,EAAIC,GAAMA,EACrDS,EAAU,QAASA,KAKtB,IAAKH,EAAW,CACf,IAAKC,EAAO9C,MAAO,CAClB8C,EAAOzC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,QACjC,CACNyC,EAAO9C,MAAMsC,EAAKjC,GAAQoC,MAIzBQ,EAAKT,EAAWU,YAAYF,EAASX,GAAQc,WAAWH,EAASX,EAErE,QACCY,GAAIA,EACJG,SAAUZ,EACV/D,OAAQ,QAASA,KAChBoE,EAAY,IACZ,IAAI5F,KAAKmG,SAAU,CAClBC,cAAcJ,OACR,CACNK,aAAaL,SAcjB3G,IAAK,cACLiC,MAAO,QAASG,GAAYH,GAC3B,aAAcA,KAAU,eAUzBjC,IAAK,WACLiC,MAAO,QAASwE,GAASxE,GACxB,aAAcA,KAAU,YAUzBjC,IAAK,WACLiC,MAAO,QAASiB,GAAS8C,GACxB,GAAIiB,SAAiBjB,KAAQ,YAAc,YAAclG,aAAaoH,OAAOlB,GACzEpF,EAAcf,CAClB,OAAOmG,KAAQiB,IAAY,UAAYA,IAAY,YAAcrG,EAAYuG,WAAWnB,KAAS,SAUlGhG,IAAK,aACLiC,MAAO,QAASkF,GAAWC,GAC1B,aAAcA,KAAM,cAUrBpH,IAAK,WACLiC,MAAO,QAASsD,GAAStD,GACxB,aAAcA,KAAU,UAAYoF,SAASpF,MAU9CjC,IAAK,YACLiC,MAAO,QAASqF,GAAU/E,GAEzB,GAAIgF,GAAMxF,OACNyF,EACAC,EAAS,MACTC,CAEJ,IAAInF,GAAQgF,EAAK,CAChBC,GAASD,EAAII,YAAaJ,EAAIK,YAC9BF,GAAWnF,EAAKsF,uBAChBJ,IAAUD,EAAM,GAAKE,EAASI,KAAMN,EAAM,GAAKE,EAASK,KAEzD,MAAON,MAGRzH,IAAK,WACLiC,MAAO,QAASmD,GAAS4C,GACxB,MAAO/D,UAASgE,iBAAiBD,MAGlChI,IAAK,iBACLiC,MAAO,QAASU,GAAeJ,GAC9BA,EAAOA,GAAQ0B,SAASiE,KAAKC,UAC7B,IAAIxC,GAAS,MACTyC,EACAC,EACAzH,EAAcf,CAElB,IAAI0C,EAAM,CACT6F,EAAU7F,EAAK+F,UACfD,GAAU9F,EAAKgG,SAEf5C,GAAS/E,EAAY4H,WAAWH,EAChCzH,EAAY6H,SAASlG,GAAQ6F,EAC7BC,EAAUzH,EAAY8H,UAAUnG,GAChC6F,GAGD,MAAOzC,MAcR3F,IAAK,aACLiC,MAAO,QAASuG,GAAWT,EAAKY,EAAOC,EAAQd,GAE9C,GAAIjH,KAEJA,GAAOtB,KAAOsB,EAAO,GAAKkH,CAC1BlH,GAAOnB,MAAQmB,EAAO,GAAKiH,CAC3BjH,GAAOpB,QAAUmJ,CACjB/H,GAAOrB,OAASmJ,CAChB9H,GAAOgI,MAAQhI,EAAOrB,OAASqB,EAAOnB,KACtCmB,GAAOiI,OAASjI,EAAOpB,QAAUoB,EAAOtB,IAExC,OAAOsB,MASRb,IAAK,gBACLiC,MAAO,QAASa,GAAcP,GAC7B,GAAIwG,GACApD,EAAS,KAEb,IAAIpD,EAAM,CACTwG,EAAOxG,EAAKsF,uBACZ,OAAOhI,GAAe2I,WAAWO,EAAKhB,IAAKgB,EAAKJ,MAAOI,EAAKH,OAAQG,EAAKjB,MAE1E,MAAOnC,MAGR3F,IAAK,cACLiC,MAAO,QAAS+G,GAAYzG,EAAM0G,GACjCA,EAAMA,GAAOhF,QACb,IAAIsD,GAAM0B,EAAIC,aAAeD,EAAIE,aAC7BC,EAAOH,EAAII,WACXC,EAAI/B,EAAIgC,YACRC,EAAIjC,EAAIkC,WACRC,EAAOT,EAAIU,eAEf,IAAIP,EAAM,CACT,GAAIA,GAAQ,aAAc,CAEzBM,EAAOT,EAAIf,KAEZoB,EAAII,EAAKE,YACTJ,GAAIE,EAAKG,YAEV,OAASf,OAAQQ,EAAGT,MAAOW,MAU5BxJ,IAAK,YACLiC,MAAO,QAASyG,GAAUnG,GACzB,MAAO1C,GAAemJ,YAAYzG,GAAMuG,UAUzC9I,IAAK,WACLiC,MAAO,QAASwG,GAASlG,GACxB,MAAO1C,GAAemJ,YAAYzG,GAAMsG,SAUzC7I,IAAK,YACLiC,MAAO,QAAS6H,GAAUvH,GACzB,GAAI3B,GAAcf,EACdyJ,EAAI1I,EAAYmJ,YAAYxH,GAAMuG,MACtC,OAAOlD,MAAKC,IAAIyD,EAAG1I,EAAYoI,YAAYzG,GAAMuG,WAUlD9I,IAAK,WACLiC,MAAO,QAAS+H,GAASzH,GACxB,GAAI3B,GAAcf,EACd2J,EAAI5I,EAAYmJ,YAAYxH,GAAMsG,KACtC,OAAOjD,MAAKC,IAAI2D,EAAG5I,EAAYoI,YAAYzG,GAAMsG,UAUlD7I,IAAK,cACLiC,MAAO,QAAS8H,KACf,GAAId,GAAMA,GAAOhF,SACbyF,EAAOT,EAAIU,eAEf,IAAIV,EAAII,YAAc,aAAc,CACnCK,EAAOT,EAAIf,KAGZ,OAASY,OAAQY,EAAKO,aAAcpB,MAAOa,EAAKQ,gBAWjDlK,IAAK,aACLiC,MAAO,QAASkI,GAAWlB,GAC1B,GAAImB,EACJnB,GAAMA,GAAOhF,QACb,UAAUmG,EAAInB,EAAIU,mBAAqBS,EAAInB,EAAIf,KAAKC,oBAAuBiC,GAAEC,YAAc,SAAWD,EAAInB,EAAIf,MAAMmC,cAWrHrK,IAAK,aACLiC,MAAO,QAASqI,GAAWrB,GAC1B,GAAImB,EACJnB,GAAMA,GAAOhF,QACb,UAAUmG,EAAInB,EAAIU,mBAAqBS,EAAInB,EAAIf,KAAKC,oBAAuBiC,GAAEG,WAAa,SAAWH,EAAInB,EAAIf,MAAMqC,aAGrH,OAAO1K"}