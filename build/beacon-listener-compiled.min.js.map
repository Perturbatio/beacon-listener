{"version":3,"file":"/home/kris/workspace/beacon-listener/build/beacon-listener-compiled.min.js","sources":["beacon-listener-compiled.js"],"names":["TOP","RIGHT","BOTTOM","LEFT","EVENT_TYPE_BEACON_FOUND","EVENT_TYPE_BEACON_LOST","BeaconListener","babelHelpers","createClass","key","get","me","_events","config","classCallCheck","this","staticClass","beacons","region","autoStart","pollInterval","_config","_MIN_TIMER_VAL","_isListening","_timerHandle","_pollInterval","_region","_beaconList","_beaconStates","_beaconDOMNodes","_fullyInside","listeners","_handleBeaconsChange","_handleRegionChange","_handleFullyInsideChange","getConfig","start","later","check","window","addEventListener","value","stop","cancel","isUndefined","_timerHandler","inViewportRegion","node","fullyInside","altRegion","inRegion","viewportRegion","node2","r","getNodeRegion","n","off","tagName","isObject","getOffsets","testMethod","forEach","call","index","testNode","args","apply","fireEvent","listener","beacon","type","data","dispatcher","document","event","CustomEvent","detail","target","dispatchEvent","callback","push","removeEventListener","stack","i","l","length","splice","configItem","hasOwnProperty","isListening","requestAnimationFrame","recalcRegion","_getList","fill","newRegion","isNumber","querySelector","r1","r2","result","Math","max","min","when","obj","fn","periodic","emptyArray","Array","isArray","from","cancelled","method","isString","wrapper","id","setInterval","setTimeout","interval","clearInterval","clearTimeout","varType","typeof","isFunction","o","isFinite","getNodeXY","win","winXY","nodeXY","nodeRect","pageXOffset","pageYOffset","getBoundingClientRect","left","top","val","querySelectorAll","body","parentNode","scrollX","scrollY","offsetLeft","offsetTop","_getRegion","winWidth","winHeight","right","bottom","width","height","rect","_getWinSize","doc","defaultView","parentWindow","mode","compatMode","h","innerHeight","w","innerWidth","root","documentElement","clientHeight","clientWidth","docHeight","_getDocSize","docWidth","scrollHeight","scrollWidth","docScrollX","t","scrollLeft","docScrollY","scrollTop"],"mappings":"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"}